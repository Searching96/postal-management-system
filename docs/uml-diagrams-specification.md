# ThÃ´ng Tin Chi Tiáº¿t Äá»ƒ Váº½ SÆ¡ Äá»“ UML

## Há»‡ Thá»‘ng Quáº£n LÃ½ BÆ°u ChÃ­nh (Postal Management System)

---

## ðŸ“Œ Má»¤C Lá»¤C

1. [Tá»•ng Quan Há»‡ Thá»‘ng](#1-tá»•ng-quan-há»‡-thá»‘ng)
2. [CÃ¡c Actor Trong Há»‡ Thá»‘ng](#2-cÃ¡c-actor-trong-há»‡-thá»‘ng)
3. [Use Case 1: Táº¡o ÄÆ¡n HÃ ng](#3-use-case-1-táº¡o-Ä‘Æ¡n-hÃ ng)
4. [Use Case 2: Theo DÃµi ÄÆ¡n HÃ ng](#4-use-case-2-theo-dÃµi-Ä‘Æ¡n-hÃ ng)
5. [Use Case 3: Quáº£n LÃ½ LÃ´ HÃ ng (Batch)](#5-use-case-3-quáº£n-lÃ½-lÃ´-hÃ ng-batch)
6. [Use Case 4: Giao HÃ ng (Pickup & Delivery)](#6-use-case-4-giao-hÃ ng-pickup--delivery)
7. [Use Case 5: Quáº£n LÃ½ BÆ°u Cá»¥c vÃ  NhÃ¢n ViÃªn](#7-use-case-5-quáº£n-lÃ½-bÆ°u-cá»¥c-vÃ -nhÃ¢n-viÃªn)

---

## 1. Tá»”NG QUAN Há»† THá»NG

### 1.1 MÃ´ Táº£ Há»‡ Thá»‘ng

Há»‡ thá»‘ng Quáº£n LÃ½ BÆ°u ChÃ­nh lÃ  má»™t á»©ng dá»¥ng web cho phÃ©p quáº£n lÃ½ toÃ n bá»™ quy trÃ¬nh váº­n chuyá»ƒn bÆ°u kiá»‡n tá»« khi táº¡o Ä‘Æ¡n Ä‘áº¿n khi giao hÃ ng thÃ nh cÃ´ng. Há»‡ thá»‘ng há»— trá»£:

- Táº¡o vÃ  quáº£n lÃ½ Ä‘Æ¡n hÃ ng
- Theo dÃµi Ä‘Æ¡n hÃ ng thá»i gian thá»±c vá»›i GPS
- Gom Ä‘Æ¡n thÃ nh lÃ´ hÃ ng Ä‘á»ƒ váº­n chuyá»ƒn
- Quáº£n lÃ½ shipper vÃ  quy trÃ¬nh giao hÃ ng
- Quáº£n lÃ½ bÆ°u cá»¥c theo cáº¥p báº­c (Hub â†’ Tá»‰nh â†’ PhÆ°á»ng/XÃ£)

### 1.2 CÃ¡c Thá»±c Thá»ƒ ChÃ­nh

| Thá»±c Thá»ƒ                             | MÃ´ Táº£                                                                                            |
| ------------------------------------ | ------------------------------------------------------------------------------------------------ |
| **Order (ÄÆ¡n hÃ ng)**                 | ÄÆ¡n gá»­i bÆ°u kiá»‡n vá»›i mÃ£ tracking, thÃ´ng tin ngÆ°á»i gá»­i/nháº­n, chi tiáº¿t gÃ³i hÃ ng                    |
| **BatchPackage (LÃ´ hÃ ng)**           | Táº­p há»£p nhiá»u Ä‘Æ¡n hÃ ng cÃ¹ng Ä‘Ã­ch Ä‘áº¿n Ä‘á»ƒ váº­n chuyá»ƒn                                               |
| **Office (BÆ°u cá»¥c)**                 | CÃ¡c Ä‘iá»ƒm bÆ°u cá»¥c/kho vá»›i loáº¡i: HUB, PROVINCE_WAREHOUSE, PROVINCE_POST, WARD_WAREHOUSE, WARD_POST |
| **Employee (NhÃ¢n viÃªn)**             | NhÃ¢n viÃªn thuá»™c bÆ°u cá»¥c vá»›i vai trÃ² cá»¥ thá»ƒ                                                       |
| **Customer (KhÃ¡ch hÃ ng)**            | KhÃ¡ch hÃ ng Ä‘Ã£ Ä‘Äƒng kÃ½ tÃ i khoáº£n                                                                  |
| **TransferRoute (Tuyáº¿n váº­n chuyá»ƒn)** | CÃ¡c tuyáº¿n Ä‘Æ°á»ng giá»¯a cÃ¡c bÆ°u cá»¥c                                                                 |

---

## 2. CÃC ACTOR TRONG Há»† THá»NG

### 2.1 Báº£ng Actor

| Actor                 | MÃ£ Vai TrÃ²      | MÃ´ Táº£                     | Quyá»n ChÃ­nh                           |
| --------------------- | --------------- | ------------------------- | ------------------------------------- |
| **Quáº£n trá»‹ há»‡ thá»‘ng** | SYSTEM_ADMIN    | Quáº£n trá»‹ toÃ n bá»™ há»‡ thá»‘ng | Quáº£n lÃ½ táº¥t cáº£ bÆ°u cá»¥c, táº¡o Hub Admin |
| **Quáº£n trá»‹ Hub**      | HUB_ADMIN       | Quáº£n lÃ½ hub vÃ¹ng miá»n     | Quáº£n lÃ½ cÃ¡c bÆ°u cá»¥c tá»‰nh trong vÃ¹ng   |
| **Quáº£n trá»‹ Tá»‰nh**     | PROVINCE_ADMIN  | Quáº£n lÃ½ kho/bÆ°u cá»¥c tá»‰nh  | Quáº£n lÃ½ bÆ°u cá»¥c phÆ°á»ng, táº¡o nhÃ¢n viÃªn |
| **Quáº£n lÃ½ PhÆ°á»ng**    | WARD_MANAGER    | Quáº£n lÃ½ bÆ°u cá»¥c phÆ°á»ng    | Quáº£n lÃ½ nhÃ¢n viÃªn, shipper            |
| **NhÃ¢n viÃªn Kho**     | WAREHOUSE_STAFF | NhÃ¢n viÃªn phÃ¢n loáº¡i       | PhÃ¢n loáº¡i, gom lÃ´, Ä‘iá»u phá»‘i          |
| **NhÃ¢n viÃªn Quáº§y**    | COUNTER_STAFF   | NhÃ¢n viÃªn tiáº¿p nháº­n       | Táº¡o Ä‘Æ¡n, in phiáº¿u                     |
| **Shipper**           | SHIPPER         | NhÃ¢n viÃªn giao hÃ ng       | Láº¥y hÃ ng, giao hÃ ng                   |
| **KhÃ¡ch hÃ ng**        | CUSTOMER        | KhÃ¡ch hÃ ng Ä‘Äƒng kÃ½        | Táº¡o Ä‘Æ¡n online, theo dÃµi Ä‘Æ¡n          |
| **KhÃ¡ch vÃ£ng lai**    | GUEST           | KhÃ¡ch chÆ°a Ä‘Äƒng kÃ½        | Gá»­i hÃ ng táº¡i quáº§y, tra cá»©u tracking   |

### 2.2 SÆ¡ Äá»“ PhÃ¢n Cáº¥p Actor

```
                         SYSTEM_ADMIN
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚               â”‚               â”‚
         HUB_ADMIN       HUB_ADMIN       HUB_ADMIN
         (Miá»n Báº¯c)     (Miá»n Trung)    (Miá»n Nam)
              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚
 PROVINCE_ADMIN  PROVINCE_ADMIN
  (Kho tá»‰nh)    (BÆ°u cá»¥c tá»‰nh)
       â”‚
 â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
 â”‚           â”‚
WARD_MANAGER WARD_MANAGER
     â”‚
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
â”‚         â”‚
STAFF   SHIPPER
```

---

## 3. USE CASE 1: Táº O ÄÆ N HÃ€NG

### 3.1 ThÃ´ng Tin Use Case

| Thuá»™c TÃ­nh         | MÃ´ Táº£                                           |
| ------------------ | ----------------------------------------------- |
| **TÃªn Use Case**   | Táº¡o ÄÆ¡n HÃ ng                                    |
| **MÃ£ UC**          | UC01                                            |
| **Actor chÃ­nh**    | NhÃ¢n viÃªn Quáº§y, KhÃ¡ch hÃ ng                      |
| **MÃ´ táº£**          | Táº¡o Ä‘Æ¡n gá»­i bÆ°u kiá»‡n má»›i (táº¡i quáº§y hoáº·c online) |
| **Tiá»n Ä‘iá»u kiá»‡n** | Actor Ä‘Ã£ Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng                 |
| **Háº­u Ä‘iá»u kiá»‡n**  | ÄÆ¡n hÃ ng Ä‘Æ°á»£c táº¡o vá»›i mÃ£ tracking duy nháº¥t      |

### 3.2 Luá»“ng Sá»± Kiá»‡n ChÃ­nh (Basic Flow)

| BÆ°á»›c | Actor                                                        | Há»‡ Thá»‘ng                                                 |
| ---- | ------------------------------------------------------------ | -------------------------------------------------------- |
| 1    | Chá»n "Táº¡o Ä‘Æ¡n hÃ ng má»›i"                                      | Hiá»ƒn thá»‹ form táº¡o Ä‘Æ¡n                                    |
| 2    | Nháº­p SÄT ngÆ°á»i gá»­i                                           | Tá»± Ä‘á»™ng Ä‘iá»n thÃ´ng tin náº¿u Ä‘Ã£ cÃ³ trong há»‡ thá»‘ng          |
| 3    | Nháº­p thÃ´ng tin ngÆ°á»i nháº­n (tÃªn, SÄT, Ä‘á»‹a chá»‰, tá»‰nh/huyá»‡n/xÃ£) | Hiá»ƒn thá»‹ gá»£i Ã½ Ä‘á»‹a chá»‰                                   |
| 4    | Nháº­p thÃ´ng tin bÆ°u kiá»‡n (loáº¡i, cÃ¢n náº·ng, kÃ­ch thÆ°á»›c)         | TÃ­nh toÃ¡n cÃ¢n náº·ng quy Ä‘á»•i (volumetric weight)           |
| 5    | Chá»n dá»‹ch vá»¥ váº­n chuyá»ƒn                                      | Hiá»ƒn thá»‹ giÃ¡ vÃ  thá»i gian dá»± kiáº¿n cho tá»«ng dá»‹ch vá»¥       |
| 6    | ThÃªm cÃ¡c tÃ¹y chá»n (báº£o hiá»ƒm, COD, giÃ¡ trá»‹ khai bÃ¡o)          | Cáº­p nháº­t tá»•ng tiá»n                                       |
| 7    | XÃ¡c nháº­n táº¡o Ä‘Æ¡n                                             | Táº¡o mÃ£ tracking (VN + 9 sá»‘ + VN), lÆ°u Ä‘Æ¡n hÃ ng           |
| 8    | -                                                            | Hiá»ƒn thá»‹ thÃ´ng tin Ä‘Æ¡n, cho phÃ©p in phiáº¿u gá»­i vÃ  mÃ£ váº¡ch |

### 3.3 Luá»“ng Thay Tháº¿ (Alternative Flow)

**A1: KhÃ¡ch hÃ ng Ä‘Äƒng kÃ½ táº¡o Ä‘Æ¡n online (ÄÆ¡n láº¥y hÃ ng táº­n nÆ¡i)**
| BÆ°á»›c | Actor | Há»‡ Thá»‘ng |
|------|-------|----------|
| 2a | Há»‡ thá»‘ng tá»± Ä‘á»™ng Ä‘iá»n thÃ´ng tin ngÆ°á»i gá»­i tá»« tÃ i khoáº£n | - |
| 7a | - | ÄÆ¡n Ä‘Æ°á»£c táº¡o vá»›i tráº¡ng thÃ¡i `PENDING_PICKUP` |
| 8a | - | ThÃ´ng bÃ¡o Ä‘áº¿n bÆ°u cá»¥c gáº§n nháº¥t Ä‘á»ƒ Ä‘iá»u shipper láº¥y hÃ ng |

**A2: KhÃ¡ch vÃ£ng lai gá»­i táº¡i quáº§y**
| BÆ°á»›c | Actor | Há»‡ Thá»‘ng |
|------|-------|----------|
| 2b | Nháº­p thÃ´ng tin ngÆ°á»i gá»­i má»›i | KhÃ´ng lÆ°u vÃ o há»‡ thá»‘ng |
| 7b | - | ÄÆ¡n Ä‘Æ°á»£c táº¡o vá»›i tráº¡ng thÃ¡i `AT_ORIGIN_OFFICE` |

### 3.4 ThÃ´ng Tin Activity Diagram

```
[Báº¯t Ä‘áº§u]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chá»n táº¡o Ä‘Æ¡n hÃ ng má»›i   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nháº­p SÄT ngÆ°á»i gá»­i      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
       â—‡ ÄÃ£ cÃ³ trong DB?
      /           \
    CÃ³            KhÃ´ng
     â”‚              â”‚
     â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tá»± Ä‘á»™ng  â”‚  â”‚ Nháº­p thÃ´ng   â”‚
â”‚ Ä‘iá»n     â”‚  â”‚ tin má»›i      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nháº­p thÃ´ng tin ngÆ°á»i    â”‚
â”‚ nháº­n vÃ  Ä‘á»‹a chá»‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nháº­p thÃ´ng tin bÆ°u kiá»‡n â”‚
â”‚ (loáº¡i, cÃ¢n náº·ng, kÃ­ch   â”‚
â”‚ thÆ°á»›c)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TÃ­nh toÃ¡n giÃ¡ theo      â”‚
â”‚ cÃ¡c dá»‹ch vá»¥             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chá»n dá»‹ch vá»¥ váº­n chuyá»ƒn â”‚
â”‚ (EXPRESS/STANDARD/      â”‚
â”‚ ECONOMY)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThÃªm tÃ¹y chá»n           â”‚
â”‚ (Báº£o hiá»ƒm, COD...)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Táº¡o mÃ£ tracking         â”‚
â”‚ VN + 9 sá»‘ + VN          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LÆ°u Ä‘Æ¡n hÃ ng vÃ o DB     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
       â—‡ ÄÆ¡n online?
      /           \
    CÃ³            KhÃ´ng
     â”‚              â”‚
     â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status:  â”‚  â”‚ Status:      â”‚
â”‚ PENDING  â”‚  â”‚ AT_ORIGIN    â”‚
â”‚ _PICKUP  â”‚  â”‚ _OFFICE      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ In phiáº¿u gá»­i & mÃ£ váº¡ch  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
         [Káº¿t thÃºc]
```

### 3.5 ThÃ´ng Tin Sequence Diagram

**CÃ¡c Ä‘á»‘i tÆ°á»£ng tham gia:**

- Actor: NhÃ¢n viÃªn Quáº§y / KhÃ¡ch hÃ ng
- Boundary: OrderUI (Giao diá»‡n táº¡o Ä‘Æ¡n)
- Controller: OrderController
- Service: OrderService
- Service: PricingService
- Service: TrackingNumberGenerator
- Entity: Order
- Entity: Customer
- Database: DB

**Luá»“ng tÆ°Æ¡ng tÃ¡c:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”
â”‚  Actor  â”‚      â”‚ OrderUI â”‚      â”‚OrderControllerâ”‚      â”‚OrderService â”‚      â”‚PricingServiceâ”‚      â”‚TrackingNumberGen    â”‚      â”‚ Order â”‚      â”‚ Customer â”‚      â”‚ DB â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”¬â”€â”˜
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚ 1. Má»Ÿ form     â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚ táº¡o Ä‘Æ¡n        â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚ 2. Nháº­p SÄT    â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚ ngÆ°á»i gá»­i      â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚ 3. GET           â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚ /customers?phone â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 4. findByPhone()     â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚ 5. Nháº­p thÃ´ng  â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚ tin Ä‘Æ¡n hÃ ng   â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚ 6. POST          â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚ /orders/preview  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 7. calculatePrice()  â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 8. calculate()     â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ (Tráº£ vá» giÃ¡ cÃ¡c      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  dá»‹ch vá»¥)        â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚ 9. Chá»n dá»‹ch   â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚ vá»¥ & xÃ¡c nháº­n  â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚ 10. POST         â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚ /orders          â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 11. createOrder()    â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚ 12. generate()     â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚ 13. new Order()    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚ 14. save()         â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 15. Hiá»ƒn thá»‹ Ä‘Æ¡n â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚ + phiáº¿u in       â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
     â”‚                â”‚                  â”‚                      â”‚                    â”‚                        â”‚                     â”‚               â”‚              â”‚
```

### 3.6 API Endpoints LiÃªn Quan

| Method | Endpoint                                            | MÃ´ táº£                           |
| ------ | --------------------------------------------------- | ------------------------------- |
| `POST` | `/api/orders/preview`                               | TÃ­nh giÃ¡ trÆ°á»›c khi táº¡o Ä‘Æ¡n      |
| `POST` | `/api/orders`                                       | Táº¡o Ä‘Æ¡n hÃ ng (nhÃ¢n viÃªn quáº§y)   |
| `POST` | `/api/orders/pickup`                                | Táº¡o Ä‘Æ¡n láº¥y hÃ ng (khÃ¡ch online) |
| `GET`  | `/api/customers?phone={phone}`                      | Tra cá»©u khÃ¡ch hÃ ng              |
| `GET`  | `/api/administrative/provinces`                     | Láº¥y danh sÃ¡ch tá»‰nh              |
| `GET`  | `/api/administrative/districts?provinceCode={code}` | Láº¥y danh sÃ¡ch huyá»‡n             |
| `GET`  | `/api/administrative/wards?districtCode={code}`     | Láº¥y danh sÃ¡ch xÃ£                |

---

## 4. USE CASE 2: THEO DÃ•I ÄÆ N HÃ€NG

### 4.1 ThÃ´ng Tin Use Case

| Thuá»™c TÃ­nh         | MÃ´ Táº£                                                     |
| ------------------ | --------------------------------------------------------- |
| **TÃªn Use Case**   | Theo DÃµi ÄÆ¡n HÃ ng                                         |
| **MÃ£ UC**          | UC02                                                      |
| **Actor chÃ­nh**    | KhÃ¡ch hÃ ng, KhÃ¡ch vÃ£ng lai                                |
| **MÃ´ táº£**          | Tra cá»©u tráº¡ng thÃ¡i vÃ  vá»‹ trÃ­ Ä‘Æ¡n hÃ ng theo thá»i gian thá»±c |
| **Tiá»n Ä‘iá»u kiá»‡n** | CÃ³ mÃ£ tracking há»£p lá»‡                                     |
| **Háº­u Ä‘iá»u kiá»‡n**  | Hiá»ƒn thá»‹ thÃ´ng tin tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng                    |

### 4.2 Luá»“ng Sá»± Kiá»‡n ChÃ­nh

| BÆ°á»›c | Actor                              | Há»‡ Thá»‘ng                                      |
| ---- | ---------------------------------- | --------------------------------------------- |
| 1    | Nháº­p mÃ£ tracking vÃ o Ã´ tÃ¬m kiáº¿m    | -                                             |
| 2    | Nháº¥n nÃºt "Tra cá»©u"                 | Validate mÃ£ tracking                          |
| 3    | -                                  | Truy váº¥n thÃ´ng tin Ä‘Æ¡n hÃ ng tá»« DB             |
| 4    | -                                  | Hiá»ƒn thá»‹ timeline tráº¡ng thÃ¡i (cÃ³ timestamp)   |
| 5    | -                                  | Hiá»ƒn thá»‹ vá»‹ trÃ­ hiá»‡n táº¡i cá»§a Ä‘Æ¡n hÃ ng         |
| 6    | (Náº¿u Ä‘ang giao) Xem vá»‹ trÃ­ shipper | Hiá»ƒn thá»‹ báº£n Ä‘á»“ vá»›i vá»‹ trÃ­ GPS thá»i gian thá»±c |

### 4.3 Luá»“ng Thay Tháº¿

**A1: MÃ£ tracking khÃ´ng tá»“n táº¡i**
| BÆ°á»›c | Actor | Há»‡ Thá»‘ng |
|------|-------|----------|
| 3a | - | Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "KhÃ´ng tÃ¬m tháº¥y Ä‘Æ¡n hÃ ng" |

**A2: ÄÆ¡n hÃ ng Ä‘ang Ä‘Æ°á»£c giao (OUT_FOR_DELIVERY)**
| BÆ°á»›c | Actor | Há»‡ Thá»‘ng |
|------|-------|----------|
| 6a | Nháº¥n "Xem vá»‹ trÃ­ shipper" | Káº¿t ná»‘i real-time Ä‘á»ƒ nháº­n vá»‹ trÃ­ GPS |
| 7a | - | Hiá»ƒn thá»‹ báº£n Ä‘á»“ vá»›i marker shipper cáº­p nháº­t má»—i 5 giÃ¢y |

### 4.4 CÃ¡c Tráº¡ng ThÃ¡i ÄÆ¡n HÃ ng

```
CREATED â†’ PENDING_PICKUP â†’ PICKED_UP â†’ AT_ORIGIN_OFFICE â†’ SORTED_AT_ORIGIN
                                              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                                                                                   â–¼
IN_TRANSIT_TO_HUB â†’ AT_HUB â†’ IN_TRANSIT_TO_DESTINATION â†’ AT_DESTINATION_HUB
                                                                â”‚
                                                      IN_TRANSIT_TO_OFFICE
                                                                â”‚
                                                      AT_DESTINATION_OFFICE
                                                                â”‚
                                                        OUT_FOR_DELIVERY
                                                                â”‚
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â–¼                                   â–¼
                                          DELIVERED                         DELIVERY_FAILED
                                                                                  â”‚
                                                                        RETURNING â†’ RETURNED
```

### 4.5 ThÃ´ng Tin Activity Diagram

```
[Báº¯t Ä‘áº§u]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nháº­p mÃ£ tracking        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gá»­i request tra cá»©u     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
       â—‡ MÃ£ tracking há»£p lá»‡?
      /           \
   KhÃ´ng          CÃ³
     â”‚              â”‚
     â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hiá»ƒn thá»‹ â”‚  â”‚ Truy váº¥n     â”‚
â”‚ lá»—i      â”‚  â”‚ thÃ´ng tin    â”‚
â”‚ "KhÃ´ng   â”‚  â”‚ Ä‘Æ¡n hÃ ng     â”‚
â”‚ tÃ¬m tháº¥y"â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â”‚
     â”‚               â–¼
     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    â”‚ Hiá»ƒn thá»‹ thÃ´ng   â”‚
     â”‚    â”‚ tin cÆ¡ báº£n       â”‚
     â”‚    â”‚ - NgÆ°á»i gá»­i/nháº­n â”‚
     â”‚    â”‚ - Tráº¡ng thÃ¡i     â”‚
     â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚           â”‚
     â”‚           â–¼
     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    â”‚ Hiá»ƒn thá»‹         â”‚
     â”‚    â”‚ timeline tráº¡ng   â”‚
     â”‚    â”‚ thÃ¡i vá»›i thá»i    â”‚
     â”‚    â”‚ gian             â”‚
     â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚           â”‚
     â”‚           â–¼
     â”‚      â—‡ Tráº¡ng thÃ¡i =
     â”‚        OUT_FOR_DELIVERY?
     â”‚       /           \
     â”‚    KhÃ´ng          CÃ³
     â”‚      â”‚              â”‚
     â”‚      â”‚              â–¼
     â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚      â”‚    â”‚ Hiá»ƒn thá»‹ nÃºt â”‚
     â”‚      â”‚    â”‚ "Xem vá»‹ trÃ­  â”‚
     â”‚      â”‚    â”‚ shipper"     â”‚
     â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚      â”‚           â”‚
     â”‚      â”‚           â–¼
     â”‚      â”‚      â—‡ Nháº¥n xem?
     â”‚      â”‚     /         \
     â”‚      â”‚   KhÃ´ng       CÃ³
     â”‚      â”‚     â”‚           â”‚
     â”‚      â”‚     â”‚           â–¼
     â”‚      â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚      â”‚     â”‚    â”‚ Káº¿t ná»‘i      â”‚
     â”‚      â”‚     â”‚    â”‚ WebSocket    â”‚
     â”‚      â”‚     â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚      â”‚     â”‚           â”‚
     â”‚      â”‚     â”‚           â–¼
     â”‚      â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚      â”‚     â”‚    â”‚ Hiá»ƒn thá»‹     â”‚
     â”‚      â”‚     â”‚    â”‚ báº£n Ä‘á»“ vá»›i   â”‚
     â”‚      â”‚     â”‚    â”‚ vá»‹ trÃ­ GPS   â”‚
     â”‚      â”‚     â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚      â”‚     â”‚           â”‚
     â”‚      â”‚     â”‚           â–¼
     â”‚      â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚      â”‚     â”‚    â”‚ Cáº­p nháº­t vá»‹  â”‚â—„â”€â”€â”€â”
     â”‚      â”‚     â”‚    â”‚ trÃ­ má»—i 5s   â”‚    â”‚
     â”‚      â”‚     â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
     â”‚      â”‚     â”‚           â”‚            â”‚
     â”‚      â”‚     â”‚           â–¼            â”‚
     â”‚      â”‚     â”‚      â—‡ ÄÃ£ giao?        â”‚
     â”‚      â”‚     â”‚     /         \        â”‚
     â”‚      â”‚     â”‚   ChÆ°a        Rá»“i      â”‚
     â”‚      â”‚     â”‚     â”‚           â”‚      â”‚
     â”‚      â”‚     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜
     â”‚      â”‚     â”‚                 â”‚
     â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
                                    â”‚
                                    â–¼
                               [Káº¿t thÃºc]
```

### 4.6 ThÃ´ng Tin Sequence Diagram

**CÃ¡c Ä‘á»‘i tÆ°á»£ng tham gia:**

- Actor: KhÃ¡ch hÃ ng / KhÃ¡ch vÃ£ng lai
- Boundary: TrackingUI (Giao diá»‡n tra cá»©u)
- Controller: TrackingController
- Service: TrackingService
- Service: LocationService
- Entity: Order
- Entity: OrderStatusHistory
- WebSocket: LocationWebSocket
- Database: DB

**Luá»“ng tÆ°Æ¡ng tÃ¡c:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”
â”‚  Actor  â”‚      â”‚ TrackingUI â”‚      â”‚TrackingControllerâ”‚      â”‚TrackingServiceâ”‚      â”‚LocationServiceâ”‚      â”‚ Order â”‚      â”‚OrderStatusHistory â”‚      â”‚LocationWebSocketâ”‚      â”‚ DB â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”¬â”€â”˜
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚ 1. Nháº­p mÃ£      â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚ tracking        â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚ 2. GET               â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚ /tracking/{tracking} â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ >â”‚ 3. getOrderStatus()  â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚ 4. findByTracking()  â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚ 5. getStatusHistory()â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 6. Hiá»ƒn thá»‹ thÃ´ng    â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚ tin + timeline       â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚ 7. Nháº¥n xem     â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚ vá»‹ trÃ­ shipper  â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚ 8. Connect           â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚ WebSocket            â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚ 9. Subscribe           â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚ (orderId)              â”‚                  â”‚
     â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚ 10. Push               â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚ location               â”‚                  â”‚
     â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 11. Cáº­p nháº­t         â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚ marker trÃªn báº£n Ä‘á»“   â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
     â”‚                 â”‚                      â”‚                       â”‚                      â”‚                   â”‚                    â”‚                        â”‚                  â”‚
```

### 4.7 API Endpoints LiÃªn Quan

| Method | Endpoint                           | MÃ´ táº£                        |
| ------ | ---------------------------------- | ---------------------------- |
| `GET`  | `/api/tracking/{trackingNumber}`   | Tra cá»©u Ä‘Æ¡n hÃ ng (public)    |
| `GET`  | `/api/tracking/location/{orderId}` | Láº¥y vá»‹ trÃ­ shipper           |
| `WS`   | `/ws/tracking/{orderId}`           | WebSocket theo dÃµi real-time |

---

## 5. USE CASE 3: QUáº¢N LÃ LÃ” HÃ€NG (BATCH)

### 5.1 ThÃ´ng Tin Use Case

| Thuá»™c TÃ­nh         | MÃ´ Táº£                                                   |
| ------------------ | ------------------------------------------------------- |
| **TÃªn Use Case**   | Quáº£n LÃ½ LÃ´ HÃ ng                                         |
| **MÃ£ UC**          | UC03                                                    |
| **Actor chÃ­nh**    | NhÃ¢n viÃªn Kho                                           |
| **MÃ´ táº£**          | Gom nhiá»u Ä‘Æ¡n hÃ ng cÃ¹ng Ä‘Ã­ch Ä‘áº¿n thÃ nh lÃ´ Ä‘á»ƒ váº­n chuyá»ƒn |
| **Tiá»n Ä‘iá»u kiá»‡n** | CÃ³ Ä‘Æ¡n hÃ ng cáº§n gom lÃ´, nhÃ¢n viÃªn Ä‘Ã£ Ä‘Äƒng nháº­p          |
| **Háº­u Ä‘iá»u kiá»‡n**  | LÃ´ hÃ ng Ä‘Æ°á»£c táº¡o vÃ  sáºµn sÃ ng váº­n chuyá»ƒn                 |

### 5.2 Luá»“ng Sá»± Kiá»‡n ChÃ­nh

| BÆ°á»›c | Actor                                   | Há»‡ Thá»‘ng                             |
| ---- | --------------------------------------- | ------------------------------------ |
| 1    | Chá»n "Quáº£n lÃ½ lÃ´ hÃ ng"                  | Hiá»ƒn thá»‹ danh sÃ¡ch lÃ´ hÃ ng hiá»‡n cÃ³   |
| 2    | Chá»n "Táº¡o lÃ´ má»›i" hoáº·c "Tá»± Ä‘á»™ng gom lÃ´" | -                                    |
| 3    | (Náº¿u táº¡o thá»§ cÃ´ng) Chá»n Ä‘Ã­ch Ä‘áº¿n        | Hiá»ƒn thá»‹ cÃ¡c Ä‘Æ¡n hÃ ng phÃ¹ há»£p        |
| 4    | Chá»n cÃ¡c Ä‘Æ¡n cáº§n gom vÃ o lÃ´             | ThÃªm Ä‘Æ¡n vÃ o lÃ´, cáº­p nháº­t sá»‘ lÆ°á»£ng   |
| 5    | XÃ¡c nháº­n niÃªm phong lÃ´ (Seal)           | ÄÃ³ng lÃ´, khÃ´ng thá»ƒ thÃªm Ä‘Æ¡n ná»¯a      |
| 6    | Chá»n "Xuáº¥t kho" (Dispatch)              | Cáº­p nháº­t tráº¡ng thÃ¡i IN_TRANSIT       |
| 7    | -                                       | Cáº­p nháº­t tráº¡ng thÃ¡i cÃ¡c Ä‘Æ¡n trong lÃ´ |

### 5.3 Luá»“ng Thay Tháº¿

**A1: Tá»± Ä‘á»™ng gom lÃ´ (Auto-batch)**
| BÆ°á»›c | Actor | Há»‡ Thá»‘ng |
|------|-------|----------|
| 2a | Chá»n "Tá»± Ä‘á»™ng gom lÃ´" | - |
| 3a | - | Ãp dá»¥ng thuáº­t toÃ¡n First Fit Decreasing |
| 4a | - | Tá»± Ä‘á»™ng phÃ¢n bá»• Ä‘Æ¡n vÃ o cÃ¡c lÃ´ theo Ä‘Ã­ch Ä‘áº¿n |
| 5a | Xem káº¿t quáº£ vÃ  xÃ¡c nháº­n | Táº¡o cÃ¡c lÃ´ hÃ ng tá»± Ä‘á»™ng |

**A2: Tiáº¿p nháº­n lÃ´ hÃ ng Ä‘áº¿n (Arrival)**
| BÆ°á»›c | Actor | Há»‡ Thá»‘ng |
|------|-------|----------|
| 1b | Xem danh sÃ¡ch lÃ´ hÃ ng Ä‘ang Ä‘áº¿n | Hiá»ƒn thá»‹ lÃ´ vá»›i tráº¡ng thÃ¡i IN_TRANSIT |
| 2b | Chá»n lÃ´ vÃ  xÃ¡c nháº­n nháº­n hÃ ng | Cáº­p nháº­t tráº¡ng thÃ¡i ARRIVED |
| 3b | Chá»n "PhÃ¢n phá»‘i" (Distribute) | Giáº£i nÃ©n Ä‘Æ¡n hÃ ng ra khá»i lÃ´ |
| 4b | - | Cáº­p nháº­t tráº¡ng thÃ¡i tá»«ng Ä‘Æ¡n hÃ ng |

### 5.4 Tráº¡ng ThÃ¡i LÃ´ HÃ ng

```
   OPEN â”€â”€â–º PROCESSING â”€â”€â–º SEALED â”€â”€â–º IN_TRANSIT â”€â”€â–º ARRIVED â”€â”€â–º DISTRIBUTED
     â”‚                        â”‚
     â”‚                        â”‚
     â–¼                        â–¼
  CANCELLED                CANCELLED
```

| Tráº¡ng thÃ¡i  | MÃ´ táº£                            |
| ----------- | -------------------------------- |
| OPEN        | Äang má»Ÿ, cÃ³ thá»ƒ thÃªm Ä‘Æ¡n         |
| PROCESSING  | Äang xá»­ lÃ½, chuáº©n bá»‹ Ä‘Ã³ng gÃ³i    |
| SEALED      | ÄÃ£ niÃªm phong, sáºµn sÃ ng xuáº¥t kho |
| IN_TRANSIT  | Äang váº­n chuyá»ƒn                  |
| ARRIVED     | ÄÃ£ Ä‘áº¿n Ä‘Ã­ch                      |
| DISTRIBUTED | ÄÃ£ phÃ¢n phá»‘i Ä‘Æ¡n hÃ ng            |
| CANCELLED   | ÄÃ£ há»§y                           |

### 5.5 ThÃ´ng Tin Activity Diagram

```
[Báº¯t Ä‘áº§u]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Xem danh sÃ¡ch lÃ´ hÃ ng   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
       â—‡ Táº¡o má»›i hay xá»­ lÃ½
         lÃ´ Ä‘ang Ä‘áº¿n?
      /           \
  Táº¡o má»›i       Xá»­ lÃ½ Ä‘áº¿n
     â”‚              â”‚
     â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chá»n     â”‚  â”‚ Xem lÃ´ hÃ ng  â”‚
â”‚ phÆ°Æ¡ng   â”‚  â”‚ Ä‘ang Ä‘áº¿n     â”‚
â”‚ thá»©c     â”‚  â”‚ (IN_TRANSIT) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚
     â–¼               â–¼
â—‡ Thá»§ cÃ´ng       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  hay tá»± Ä‘á»™ng?   â”‚ Chá»n lÃ´ cáº§n  â”‚
  /        \     â”‚ xÃ¡c nháº­n     â”‚
Thá»§ cÃ´ng  Tá»± Ä‘á»™ngâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚          â”‚          â”‚
  â–¼          â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chá»n   â”‚ â”‚ Há»‡     â”‚ â”‚ XÃ¡c nháº­n   â”‚
â”‚ Ä‘Ã­ch   â”‚ â”‚ thá»‘ng  â”‚ â”‚ nháº­n hÃ ng  â”‚
â”‚ Ä‘áº¿n    â”‚ â”‚ tá»±     â”‚ â”‚ (ARRIVED)  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ Ä‘á»™ng   â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚      â”‚ phÃ¢n   â”‚        â”‚
    â–¼      â”‚ bá»•     â”‚        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chá»n   â”‚     â”‚       â”‚ PhÃ¢n phá»‘i  â”‚
â”‚ Ä‘Æ¡n    â”‚     â”‚       â”‚ Ä‘Æ¡n hÃ ng   â”‚
â”‚ hÃ ng   â”‚     â”‚       â”‚ (DISTRIBUTE)â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚          â”‚              â”‚
    â–¼          â”‚              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThÃªm Ä‘Æ¡n   â”‚ â”‚        â”‚ Cáº­p nháº­t   â”‚
â”‚ vÃ o lÃ´     â”‚ â”‚        â”‚ tráº¡ng thÃ¡i â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚        â”‚ tá»«ng Ä‘Æ¡n   â”‚
    â”‚          â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â–¼          â”‚               â”‚
â—‡ ThÃªm ná»¯a?   â”‚               â”‚
  /      \     â”‚               â”‚
 CÃ³     KhÃ´ng  â”‚               â”‚
  â”‚       â”‚    â”‚               â”‚
  â”‚       â–¼    â”‚               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚               â”‚
  â”‚  â”‚ NiÃªm   â”‚â”‚               â”‚
  â”‚  â”‚ phong  â”‚â”‚               â”‚
  â”‚  â”‚ (SEAL) â”‚â”‚               â”‚
  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜â”‚               â”‚
  â”‚      â”‚     â”‚               â”‚
  â”‚      â–¼     â”‚               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚               â”‚
  â”‚  â”‚ Xuáº¥t   â”‚â”‚               â”‚
  â”‚  â”‚ kho    â”‚â”‚               â”‚
  â”‚  â”‚(DISPATCH)               â”‚
  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜â”‚               â”‚
  â”‚      â”‚     â”‚               â”‚
  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
               [Káº¿t thÃºc]
```

### 5.6 ThÃ´ng Tin Sequence Diagram

**CÃ¡c Ä‘á»‘i tÆ°á»£ng tham gia:**

- Actor: NhÃ¢n viÃªn Kho
- Boundary: BatchUI (Giao diá»‡n quáº£n lÃ½ lÃ´)
- Controller: BatchController
- Service: BatchService
- Service: OrderService
- Entity: BatchPackage
- Entity: Order
- Database: DB

**Luá»“ng tÆ°Æ¡ng tÃ¡c - Táº¡o vÃ  xuáº¥t lÃ´ hÃ ng:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”
â”‚  Actor  â”‚      â”‚ BatchUI â”‚      â”‚BatchControllerâ”‚      â”‚BatchServiceâ”‚      â”‚OrderServiceâ”‚      â”‚BatchPackage â”‚      â”‚ Order â”‚      â”‚ DB â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”¬â”€â”˜
     â”‚                â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚ 1. Táº¡o lÃ´ má»›i  â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ 2. POST          â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ /batches         â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 3. createBatch()    â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ 4. new Batch()    â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ 5. save()         â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚ 6. ThÃªm Ä‘Æ¡n    â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚ vÃ o lÃ´         â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ 7. POST          â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ /batches/{id}/   â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ add-orders       â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 8. addOrders()      â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ 9. validateOrders()                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚ 10. get orders     â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                  â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ 11. link orders   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ to batch          â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚ 12. NiÃªm phong â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ 13. POST         â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ /batches/{id}/   â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ seal             â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 14. sealBatch()     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ 15. update status â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ to SEALED         â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚ 16. Xuáº¥t kho   â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ 17. POST         â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ /batches/{id}/   â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚ dispatch         â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 18. dispatch()      â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ 19. update batch  â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ status=IN_TRANSIT â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ 20. update orders â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚ status            â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
     â”‚                â”‚                  â”‚                     â”‚                   â”‚                    â”‚                 â”‚             â”‚
```

### 5.7 API Endpoints LiÃªn Quan

| Method | Endpoint                       | MÃ´ táº£                            |
| ------ | ------------------------------ | -------------------------------- |
| `POST` | `/api/batches`                 | Táº¡o lÃ´ hÃ ng má»›i                  |
| `POST` | `/api/batches/auto-batch`      | Tá»± Ä‘á»™ng gom lÃ´ theo Ä‘Ã­ch Ä‘áº¿n     |
| `POST` | `/api/batches/{id}/add-orders` | ThÃªm Ä‘Æ¡n vÃ o lÃ´                  |
| `POST` | `/api/batches/{id}/seal`       | NiÃªm phong lÃ´                    |
| `POST` | `/api/batches/{id}/dispatch`   | Xuáº¥t kho                         |
| `POST` | `/api/batches/{id}/arrive`     | XÃ¡c nháº­n nháº­n hÃ ng               |
| `POST` | `/api/batches/{id}/distribute` | PhÃ¢n phá»‘i Ä‘Æ¡n hÃ ng               |
| `GET`  | `/api/batches/incoming`        | Láº¥y danh sÃ¡ch lÃ´ Ä‘ang Ä‘áº¿n        |
| `GET`  | `/api/batches/destinations`    | Láº¥y cÃ¡c Ä‘Ã­ch Ä‘áº¿n cÃ³ Ä‘Æ¡n chÆ°a gom |

---

## 6. USE CASE 4: GIAO HÃ€NG (PICKUP & DELIVERY)

### 6.1 ThÃ´ng Tin Use Case

| Thuá»™c TÃ­nh         | MÃ´ Táº£                                                   |
| ------------------ | ------------------------------------------------------- |
| **TÃªn Use Case**   | Giao HÃ ng                                               |
| **MÃ£ UC**          | UC04                                                    |
| **Actor chÃ­nh**    | Shipper, Quáº£n lÃ½ PhÆ°á»ng                                 |
| **MÃ´ táº£**          | Quy trÃ¬nh láº¥y hÃ ng tá»« khÃ¡ch vÃ  giao hÃ ng Ä‘áº¿n ngÆ°á»i nháº­n |
| **Tiá»n Ä‘iá»u kiá»‡n** | CÃ³ Ä‘Æ¡n cáº§n láº¥y/giao, shipper Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n cÃ´ng          |
| **Háº­u Ä‘iá»u kiá»‡n**  | ÄÆ¡n hÃ ng Ä‘Æ°á»£c giao thÃ nh cÃ´ng hoáº·c Ä‘Ã¡nh dáº¥u tháº¥t báº¡i    |

### 6.2 Luá»“ng Sá»± Kiá»‡n ChÃ­nh - Láº¥y HÃ ng (First-Mile)

| BÆ°á»›c | Actor                                               | Há»‡ Thá»‘ng                               |
| ---- | --------------------------------------------------- | -------------------------------------- |
| 1    | Quáº£n lÃ½: Xem danh sÃ¡ch Ä‘Æ¡n cáº§n láº¥y (PENDING_PICKUP) | Hiá»ƒn thá»‹ danh sÃ¡ch Ä‘Æ¡n                 |
| 2    | Quáº£n lÃ½: PhÃ¢n cÃ´ng shipper cho Ä‘Æ¡n                  | Gá»­i thÃ´ng bÃ¡o Ä‘áº¿n shipper              |
| 3    | Shipper: Xem danh sÃ¡ch Ä‘Æ¡n Ä‘Æ°á»£c giao                | Hiá»ƒn thá»‹ chi tiáº¿t Ä‘á»‹a chá»‰ láº¥y hÃ ng     |
| 4    | Shipper: Báº¯t Ä‘áº§u ca lÃ m viá»‡c                        | KÃ­ch hoáº¡t GPS tracking                 |
| 5    | Shipper: Di chuyá»ƒn Ä‘áº¿n Ä‘á»‹a chá»‰ khÃ¡ch                | Cáº­p nháº­t vá»‹ trÃ­ thá»i gian thá»±c         |
| 6    | Shipper: Láº¥y hÃ ng vÃ  xÃ¡c nháº­n                       | Cáº­p nháº­t tráº¡ng thÃ¡i â†’ PICKED_UP        |
| 7    | Shipper: Mang hÃ ng vá» bÆ°u cá»¥c                       | Cáº­p nháº­t tráº¡ng thÃ¡i â†’ AT_ORIGIN_OFFICE |

### 6.3 Luá»“ng Sá»± Kiá»‡n ChÃ­nh - Giao HÃ ng (Last-Mile)

| BÆ°á»›c | Actor                               | Há»‡ Thá»‘ng                                          |
| ---- | ----------------------------------- | ------------------------------------------------- |
| 1    | Quáº£n lÃ½: Xem danh sÃ¡ch Ä‘Æ¡n cáº§n giao | Hiá»ƒn thá»‹ Ä‘Æ¡n AT_DESTINATION_OFFICE                |
| 2    | Quáº£n lÃ½: PhÃ¢n cÃ´ng Ä‘Æ¡n cho shipper  | Gá»­i thÃ´ng bÃ¡o Ä‘áº¿n shipper                         |
| 3    | Shipper: Xem danh sÃ¡ch giao hÃ ng    | Hiá»ƒn thá»‹ chi tiáº¿t + tÃ­ch há»£p Google Maps          |
| 4    | Shipper: Báº¯t Ä‘áº§u giao hÃ ng          | KÃ­ch hoáº¡t GPS tracking, status â†’ OUT_FOR_DELIVERY |
| 5    | Shipper: Di chuyá»ƒn Ä‘áº¿n ngÆ°á»i nháº­n   | KhÃ¡ch cÃ³ thá»ƒ theo dÃµi vá»‹ trÃ­                      |
| 6    | Shipper: Giao hÃ ng thÃ nh cÃ´ng       | Cáº­p nháº­t status â†’ DELIVERED                       |

### 6.4 Luá»“ng Thay Tháº¿

**A1: Giao hÃ ng tháº¥t báº¡i**
| BÆ°á»›c | Actor | Há»‡ Thá»‘ng |
|------|-------|----------|
| 6a | Shipper: KhÃ´ng liÃªn láº¡c Ä‘Æ°á»£c / KhÃ¡ch tá»« chá»‘i | - |
| 7a | Shipper: Chá»n lÃ½ do tháº¥t báº¡i | Cáº­p nháº­t status â†’ DELIVERY_FAILED |
| 8a | - | LÃªn lá»‹ch giao láº¡i hoáº·c tráº£ hÃ ng |

**A2: Thu tiá»n COD**
| BÆ°á»›c | Actor | Há»‡ Thá»‘ng |
|------|-------|----------|
| 6b | Shipper: Thu tiá»n COD tá»« khÃ¡ch | - |
| 7b | Shipper: XÃ¡c nháº­n Ä‘Ã£ thu tiá»n | Ghi nháº­n sá»‘ tiá»n COD |
| 8b | - | ÄÆ¡n thÃ nh cÃ´ng + Ä‘Ã¡nh dáº¥u Ä‘Ã£ thu COD |

### 6.5 ThÃ´ng Tin Activity Diagram - Giao HÃ ng

```
[Báº¯t Ä‘áº§u]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Quáº£n lÃ½: Xem Ä‘Æ¡n cáº§n    â”‚
â”‚ giao (AT_DESTINATION_   â”‚
â”‚ OFFICE)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chá»n Ä‘Æ¡n vÃ  phÃ¢n cÃ´ng   â”‚
â”‚ cho shipper             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Shipper: Nháº­n thÃ´ng bÃ¡o â”‚
â”‚ vÃ  xem danh sÃ¡ch        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Shipper: Báº¯t Ä‘áº§u giao   â”‚
â”‚ (KÃ­ch hoáº¡t GPS)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status â†’ OUT_FOR_       â”‚
â”‚ DELIVERY                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Di chuyá»ƒn Ä‘áº¿n ngÆ°á»i     â”‚
â”‚ nháº­n (theo Google Maps) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
      â—‡ CÃ³ thu COD?
      /           \
    CÃ³            KhÃ´ng
     â”‚              â”‚
     â–¼              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ Thu tiá»n â”‚        â”‚
â”‚ COD      â”‚        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚
     â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
      â—‡ Giao thÃ nh cÃ´ng?
      /              \
    CÃ³              KhÃ´ng
     â”‚                â”‚
     â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ XÃ¡c nháº­n â”‚    â”‚ Chá»n lÃ½ do    â”‚
â”‚ DELIVEREDâ”‚    â”‚ tháº¥t báº¡i      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚
     â”‚                 â–¼
     â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚           â”‚ Status â†’      â”‚
     â”‚           â”‚ DELIVERY_FAILEDâ”‚
     â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚
     â”‚                  â–¼
     â”‚           â—‡ Giao láº¡i hay
     â”‚             tráº£ hÃ ng?
     â”‚            /         \
     â”‚       Giao láº¡i    Tráº£ hÃ ng
     â”‚          â”‚            â”‚
     â”‚          â–¼            â–¼
     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    â”‚ LÃªn lá»‹ch â”‚ â”‚ Status â†’ â”‚
     â”‚    â”‚ giao láº¡i â”‚ â”‚ RETURNINGâ”‚
     â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚         â”‚            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Káº¿t thÃºc ca lÃ m  â”‚
         â”‚ (Táº¯t GPS)        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
            [Káº¿t thÃºc]
```

### 6.6 ThÃ´ng Tin Sequence Diagram - Giao HÃ ng

**CÃ¡c Ä‘á»‘i tÆ°á»£ng tham gia:**

- Actor1: Quáº£n lÃ½ PhÆ°á»ng
- Actor2: Shipper
- Actor3: KhÃ¡ch hÃ ng (xem tracking)
- Boundary: ShipperUI, TrackingUI
- Controller: OrderController, TrackingController
- Service: OrderService, TrackingService
- Entity: Order
- External: Google Maps API
- WebSocket: LocationWebSocket

**Luá»“ng tÆ°Æ¡ng tÃ¡c:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”
â”‚ Quáº£n lÃ½  â”‚    â”‚ Shipper â”‚    â”‚ KhÃ¡ch hÃ ngâ”‚    â”‚ ShipperUI  â”‚    â”‚OrderControllerâ”‚    â”‚OrderServiceâ”‚    â”‚TrackingControllerâ”‚    â”‚LocationWS  â”‚    â”‚ Order â”‚    â”‚ DB â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”¬â”€â”˜
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚ 1. PhÃ¢n cÃ´ng  â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚ Ä‘Æ¡n cho       â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚ shipper       â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 2. POST          â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ /orders/{id}/    â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ assign-delivery  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 3. assign()       â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚ 4. Xem Ä‘Æ¡n    â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚ Ä‘Æ°á»£c giao     â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 5. GET           â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ /shipper/orders  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 6. getAssigned()  â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚               â”‚               â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚ 7. Báº¯t Ä‘áº§u    â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚ giao hÃ ng     â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 8. POST          â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ /tracking/       â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ start-session    â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚ 9. Update status   â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚ OUT_FOR_DELIVERY   â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚               â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚ 10. Gá»­i GPS   â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚ liÃªn tá»¥c      â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 11. POST         â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ /tracking/       â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ update-location  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 12. broadcast()   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚ 13. Theo dÃµi   â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚ vá»‹ trÃ­ shipper â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚ 14. push location â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚ 15. XÃ¡c nháº­n  â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚ DELIVERED     â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 16. POST         â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ /orders/{id}/    â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚ delivered        â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 17. deliver()     â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚ 18. Update status  â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚ DELIVERED          â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚               â”‚               â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
     â”‚               â”‚               â”‚                â”‚                  â”‚                   â”‚                    â”‚                   â”‚               â”‚           â”‚
```

### 6.7 API Endpoints LiÃªn Quan

| Method | Endpoint                           | MÃ´ táº£                       |
| ------ | ---------------------------------- | --------------------------- |
| `GET`  | `/api/orders/pending-pickup`       | Láº¥y Ä‘Æ¡n chá» láº¥y hÃ ng        |
| `POST` | `/api/orders/{id}/assign-pickup`   | PhÃ¢n cÃ´ng shipper láº¥y hÃ ng  |
| `POST` | `/api/orders/{id}/picked-up`       | XÃ¡c nháº­n Ä‘Ã£ láº¥y hÃ ng        |
| `POST` | `/api/orders/{id}/assign-delivery` | PhÃ¢n cÃ´ng shipper giao hÃ ng |
| `POST` | `/api/orders/{id}/delivered`       | XÃ¡c nháº­n Ä‘Ã£ giao            |
| `POST` | `/api/orders/{id}/delivery-failed` | ÄÃ¡nh dáº¥u giao tháº¥t báº¡i      |
| `GET`  | `/api/shipper/orders`              | Shipper xem Ä‘Æ¡n Ä‘Æ°á»£c giao   |
| `POST` | `/api/tracking/start-session`      | Báº¯t Ä‘áº§u ca lÃ m viá»‡c         |
| `POST` | `/api/tracking/update-location`    | Cáº­p nháº­t vá»‹ trÃ­ GPS         |
| `POST` | `/api/tracking/end-session`        | Káº¿t thÃºc ca lÃ m viá»‡c        |

---

## 7. USE CASE 5: QUáº¢N LÃ BÆ¯U Cá»¤C VÃ€ NHÃ‚N VIÃŠN

### 7.1 ThÃ´ng Tin Use Case

| Thuá»™c TÃ­nh         | MÃ´ Táº£                                                    |
| ------------------ | -------------------------------------------------------- |
| **TÃªn Use Case**   | Quáº£n LÃ½ BÆ°u Cá»¥c vÃ  NhÃ¢n ViÃªn                             |
| **MÃ£ UC**          | UC05                                                     |
| **Actor chÃ­nh**    | System Admin, Hub Admin, Province Admin, Ward Manager    |
| **MÃ´ táº£**          | Quáº£n lÃ½ cáº¥u trÃºc tá»• chá»©c bÆ°u cá»¥c vÃ  phÃ¢n quyá»n nhÃ¢n viÃªn |
| **Tiá»n Ä‘iá»u kiá»‡n** | Actor cÃ³ quyá»n quáº£n lÃ½ tÆ°Æ¡ng á»©ng                         |
| **Háº­u Ä‘iá»u kiá»‡n**  | BÆ°u cá»¥c/NhÃ¢n viÃªn Ä‘Æ°á»£c táº¡o/cáº­p nháº­t trong há»‡ thá»‘ng       |

### 7.2 Cáº¥u TrÃºc Tá»• Chá»©c

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    SYSTEM_ADMIN     â”‚
                    â”‚  (Trá»¥ sá»Ÿ chÃ­nh)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     HUB     â”‚     â”‚     HUB     â”‚     â”‚     HUB     â”‚
    â”‚  (Miá»n Báº¯c) â”‚     â”‚ (Miá»n Trung)â”‚     â”‚  (Miá»n Nam) â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚  PROVINCE   â”‚     â”‚  PROVINCE   â”‚     â”‚  PROVINCE   â”‚
    â”‚(Kho/BÆ°u cá»¥c)â”‚     â”‚(Kho/BÆ°u cá»¥c)â”‚     â”‚(Kho/BÆ°u cá»¥c)â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚    WARD     â”‚     â”‚    WARD     â”‚     â”‚    WARD     â”‚
    â”‚(Kho/BÆ°u cá»¥c)â”‚     â”‚(Kho/BÆ°u cá»¥c)â”‚     â”‚(Kho/BÆ°u cá»¥c)â”‚
    â”‚ + Staff     â”‚     â”‚ + Staff     â”‚     â”‚ + Staff     â”‚
    â”‚ + Shipper   â”‚     â”‚ + Shipper   â”‚     â”‚ + Shipper   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 Loáº¡i BÆ°u Cá»¥c

| Loáº¡i           | MÃ£                   | MÃ´ Táº£                                        |
| -------------- | -------------------- | -------------------------------------------- |
| Hub trung tÃ¢m  | `HUB`                | Trung tÃ¢m vÃ¹ng miá»n, Ä‘iá»ƒm trung chuyá»ƒn chÃ­nh |
| Kho tá»‰nh       | `PROVINCE_WAREHOUSE` | Kho lÆ°u trá»¯ cáº¥p tá»‰nh                         |
| BÆ°u cá»¥c tá»‰nh   | `PROVINCE_POST`      | Äiá»ƒm giao dá»‹ch cáº¥p tá»‰nh                      |
| Kho phÆ°á»ng     | `WARD_WAREHOUSE`     | Kho lÆ°u trá»¯ cáº¥p phÆ°á»ng/xÃ£                    |
| BÆ°u cá»¥c phÆ°á»ng | `WARD_POST`          | Äiá»ƒm giao dá»‹ch cáº¥p phÆ°á»ng/xÃ£                 |

### 7.4 Luá»“ng Sá»± Kiá»‡n ChÃ­nh - Táº¡o BÆ°u Cá»¥c

| BÆ°á»›c | Actor                                       | Há»‡ Thá»‘ng                                         |
| ---- | ------------------------------------------- | ------------------------------------------------ |
| 1    | Chá»n "Quáº£n lÃ½ bÆ°u cá»¥c"                      | Hiá»ƒn thá»‹ danh sÃ¡ch bÆ°u cá»¥c trong pháº¡m vi quáº£n lÃ½ |
| 2    | Chá»n "ThÃªm bÆ°u cá»¥c má»›i"                     | Hiá»ƒn thá»‹ form táº¡o bÆ°u cá»¥c                        |
| 3    | Nháº­p thÃ´ng tin (tÃªn, Ä‘á»‹a chá»‰, loáº¡i, vá»‹ trÃ­) | Validate thÃ´ng tin                               |
| 4    | Chá»n tá»‰nh/huyá»‡n/xÃ£                          | Gá»£i Ã½ Ä‘á»‹a chá»‰ hÃ nh chÃ­nh                         |
| 5    | XÃ¡c nháº­n táº¡o                                | LÆ°u bÆ°u cá»¥c vÃ o DB                               |
| 6    | -                                           | Hiá»ƒn thá»‹ thÃ´ng tin bÆ°u cá»¥c má»›i                   |

### 7.5 Luá»“ng Sá»± Kiá»‡n ChÃ­nh - Táº¡o NhÃ¢n ViÃªn

| BÆ°á»›c | Actor                     | Há»‡ Thá»‘ng                               |
| ---- | ------------------------- | -------------------------------------- |
| 1    | Chá»n "Quáº£n lÃ½ nhÃ¢n viÃªn"  | Hiá»ƒn thá»‹ danh sÃ¡ch nhÃ¢n viÃªn           |
| 2    | Chá»n "ThÃªm nhÃ¢n viÃªn má»›i" | Hiá»ƒn thá»‹ form táº¡o nhÃ¢n viÃªn            |
| 3    | Nháº­p thÃ´ng tin cÃ¡ nhÃ¢n    | Validate thÃ´ng tin                     |
| 4    | Chá»n vai trÃ²              | Hiá»ƒn thá»‹ cÃ¡c vai trÃ² Ä‘Æ°á»£c phÃ©p táº¡o     |
| 5    | Chá»n bÆ°u cá»¥c lÃ m viá»‡c     | Hiá»ƒn thá»‹ bÆ°u cá»¥c trong pháº¡m vi quáº£n lÃ½ |
| 6    | Táº¡o tÃ i khoáº£n Ä‘Äƒng nháº­p   | Táº¡o username/password máº·c Ä‘á»‹nh         |
| 7    | XÃ¡c nháº­n                  | LÆ°u nhÃ¢n viÃªn vÃ  tÃ i khoáº£n             |

### 7.6 Quyá»n Táº¡o Theo Vai TrÃ²

| Actor          | CÃ³ thá»ƒ táº¡o                   | Pháº¡m vi               |
| -------------- | ---------------------------- | --------------------- |
| System Admin   | Hub Admin                    | ToÃ n há»‡ thá»‘ng         |
| Hub Admin      | Province Admin               | CÃ¡c tá»‰nh thuá»™c hub    |
| Province Admin | Ward Manager, Staff, Shipper | CÃ¡c phÆ°á»ng thuá»™c tá»‰nh |
| Ward Manager   | Staff, Shipper               | BÆ°u cá»¥c cá»§a mÃ¬nh      |

### 7.7 ThÃ´ng Tin Activity Diagram

```
[Báº¯t Ä‘áº§u]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ÄÄƒng nháº­p vá»›i vai trÃ²   â”‚
â”‚ quáº£n lÃ½                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
       â—‡ Quáº£n lÃ½ gÃ¬?
      /           \
  BÆ°u cá»¥c      NhÃ¢n viÃªn
     â”‚              â”‚
     â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Xem DS   â”‚  â”‚ Xem DS       â”‚
â”‚ bÆ°u cá»¥c  â”‚  â”‚ nhÃ¢n viÃªn    â”‚
â”‚ theo     â”‚  â”‚ theo pháº¡m    â”‚
â”‚ pháº¡m vi  â”‚  â”‚ vi quáº£n lÃ½   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚
     â–¼               â–¼
â—‡ Thao tÃ¡c?      â—‡ Thao tÃ¡c?
  /    |    \      /    |    \
ThÃªm  Sá»­a  XÃ³a  ThÃªm  Sá»­a  XÃ³a
  â”‚    â”‚    â”‚     â”‚    â”‚    â”‚
  â–¼    â”‚    â”‚     â–¼    â”‚    â”‚
â”Œâ”€â”€â”€â”€â” â”‚    â”‚   â”Œâ”€â”€â”€â”€â” â”‚    â”‚
â”‚Nháº­pâ”‚ â”‚    â”‚   â”‚Nháº­pâ”‚ â”‚    â”‚
â”‚thÃ´ngâ”‚ â”‚    â”‚   â”‚thÃ´ngâ”‚ â”‚    â”‚
â”‚tin  â”‚ â”‚    â”‚   â”‚tin NVâ”‚ â”‚    â”‚
â”‚bÆ°u  â”‚ â”‚    â”‚   â”‚+ vai â”‚ â”‚    â”‚
â”‚cá»¥c  â”‚ â”‚    â”‚   â”‚trÃ²   â”‚ â”‚    â”‚
â””â”€â”€â”¬â”€â”˜ â”‚    â”‚   â””â”€â”€â”¬â”€â”€â”˜ â”‚    â”‚
   â”‚   â”‚    â”‚      â”‚    â”‚    â”‚
   â–¼   â”‚    â”‚      â–¼    â”‚    â”‚
â”Œâ”€â”€â”€â”€â” â”‚    â”‚   â”Œâ”€â”€â”€â”€â”  â”‚    â”‚
â”‚Chá»nâ”‚ â”‚    â”‚   â”‚Táº¡o â”‚  â”‚    â”‚
â”‚vá»‹  â”‚ â”‚    â”‚   â”‚tÃ i â”‚  â”‚    â”‚
â”‚trÃ­ â”‚ â”‚    â”‚   â”‚khoáº£nâ”‚ â”‚    â”‚
â”‚Ä‘á»‹a â”‚ â”‚    â”‚   â”‚Ä‘Äƒng â”‚ â”‚    â”‚
â”‚lÃ½  â”‚ â”‚    â”‚   â”‚nháº­p â”‚ â”‚    â”‚
â””â”€â”€â”¬â”€â”˜ â”‚    â”‚   â””â”€â”€â”¬â”€â”€â”˜ â”‚    â”‚
   â”‚   â”‚    â”‚      â”‚    â”‚    â”‚
   â””â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
                â”‚
                â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ LÆ°u vÃ o DB     â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Hiá»ƒn thá»‹ káº¿t   â”‚
       â”‚ quáº£            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
          [Káº¿t thÃºc]
```

### 7.8 ThÃ´ng Tin Sequence Diagram - Táº¡o NhÃ¢n ViÃªn

**CÃ¡c Ä‘á»‘i tÆ°á»£ng tham gia:**

- Actor: Province Admin / Ward Manager
- Boundary: EmployeeUI
- Controller: UserController
- Service: UserService
- Service: AuthService
- Entity: Employee
- Entity: Account
- Database: DB

**Luá»“ng tÆ°Æ¡ng tÃ¡c:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”
â”‚  Actor  â”‚      â”‚ EmployeeUI â”‚      â”‚UserControllerâ”‚      â”‚UserServiceâ”‚      â”‚AuthServiceâ”‚      â”‚ Employee â”‚      â”‚ Account â”‚      â”‚ DB â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”¬â”€â”˜
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚ 1. Má»Ÿ form      â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚ thÃªm nhÃ¢n viÃªn  â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚ 2. GET             â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚ /offices (in scope)â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚ 3. getOffices()    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                 â”‚                    â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚ 4. Nháº­p thÃ´ng   â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚ tin nhÃ¢n viÃªn   â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚ 5. POST            â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚ /users/employees   â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ 6. createEmployee()â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚ 7. validate role â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚ permissions      â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                 â”‚                    â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚ 8. createAccount()                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚ 9. hashPassword()                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚ 10. new Account()                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚ 11. save()      â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                 â”‚                    â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚ 12. new Employee()                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚ 13. save()      â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                 â”‚                    â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                 â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 14. ThÃ´ng bÃ¡o     â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚ táº¡o thÃ nh cÃ´ng +   â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚ thÃ´ng tin Ä‘Äƒng nháº­pâ”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
     â”‚                 â”‚                    â”‚                    â”‚                  â”‚                 â”‚                 â”‚              â”‚
```

### 7.9 API Endpoints LiÃªn Quan

| Method   | Endpoint                           | MÃ´ táº£                         |
| -------- | ---------------------------------- | ----------------------------- |
| `GET`    | `/api/offices`                     | Láº¥y danh sÃ¡ch bÆ°u cá»¥c         |
| `POST`   | `/api/offices`                     | Táº¡o bÆ°u cá»¥c má»›i               |
| `PUT`    | `/api/offices/{id}`                | Cáº­p nháº­t bÆ°u cá»¥c              |
| `DELETE` | `/api/offices/{id}`                | XÃ³a bÆ°u cá»¥c (soft delete)     |
| `GET`    | `/api/users/employees`             | Láº¥y danh sÃ¡ch nhÃ¢n viÃªn       |
| `POST`   | `/api/users/employees`             | Táº¡o nhÃ¢n viÃªn má»›i             |
| `POST`   | `/api/hub-admin/register`          | ÄÄƒng kÃ½ Hub Admin             |
| `POST`   | `/api/shippers`                    | Táº¡o shipper má»›i               |
| `GET`    | `/api/hub-admin/province-offices`  | Láº¥y bÆ°u cá»¥c tá»‰nh trong hub    |
| `GET`    | `/api/province-admin/ward-offices` | Láº¥y bÆ°u cá»¥c phÆ°á»ng trong tá»‰nh |

---

## 8. Tá»”NG Há»¢P SÆ  Äá»’ USE CASE Tá»”NG THá»‚

### 8.1 Danh SÃ¡ch Use Case

| STT | MÃ£   | TÃªn Use Case                 | Actor ChÃ­nh                             |
| --- | ---- | ---------------------------- | --------------------------------------- |
| 1   | UC01 | Táº¡o ÄÆ¡n HÃ ng                 | NhÃ¢n viÃªn Quáº§y, KhÃ¡ch hÃ ng              |
| 2   | UC02 | Theo DÃµi ÄÆ¡n HÃ ng            | KhÃ¡ch hÃ ng, KhÃ¡ch vÃ£ng lai              |
| 3   | UC03 | Quáº£n LÃ½ LÃ´ HÃ ng              | NhÃ¢n viÃªn Kho                           |
| 4   | UC04 | Giao HÃ ng                    | Shipper, Quáº£n lÃ½ PhÆ°á»ng                 |
| 5   | UC05 | Quáº£n LÃ½ BÆ°u Cá»¥c vÃ  NhÃ¢n ViÃªn | System/Hub/Province Admin, Ward Manager |

### 8.2 Ma Tráº­n Actor - Use Case

| Actor           | UC01 | UC02 | UC03 | UC04 | UC05 |
| --------------- | ---- | ---- | ---- | ---- | ---- |
| System Admin    |      |      |      |      | âœ“    |
| Hub Admin       |      |      |      |      | âœ“    |
| Province Admin  |      |      |      |      | âœ“    |
| Ward Manager    |      |      |      | âœ“    | âœ“    |
| Warehouse Staff |      |      | âœ“    |      |      |
| Counter Staff   | âœ“    |      |      |      |      |
| Shipper         |      |      |      | âœ“    |      |
| Customer        | âœ“    | âœ“    |      |      |      |
| Guest           |      | âœ“    |      |      |      |

### 8.3 Má»‘i Quan Há»‡ Giá»¯a CÃ¡c Use Case

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UC01: Táº¡o    â”‚
â”‚   ÄÆ¡n HÃ ng     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ <<include>>
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UC02: Theo   â”‚â—„â”€â”€â”€â”€â”‚   UC04: Giao   â”‚
â”‚   DÃµi ÄÆ¡n      â”‚     â”‚   HÃ ng         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â–²                      â”‚
        â”‚ <<include>>          â”‚ <<include>>
        â”‚                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UC03: Quáº£n   â”‚     â”‚   UC05: Quáº£n   â”‚
â”‚   LÃ½ LÃ´ HÃ ng   â”‚     â”‚   LÃ½ BÆ°u Cá»¥c   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. CHÃš THÃCH

### 9.1 KÃ½ Hiá»‡u SÆ¡ Äá»“

| KÃ½ hiá»‡u | Ã nghÄ©a                    |
| ------- | -------------------------- |
| `â—‡`     | Äiá»ƒm quyáº¿t Ä‘á»‹nh (Decision) |
| `â†’`     | Luá»“ng Ä‘iá»u khiá»ƒn           |
| `[]`    | Báº¯t Ä‘áº§u/Káº¿t thÃºc           |
| `â”€>`    | Message trong Sequence     |
| `<â”€â”€`   | Return message             |

### 9.2 CÃ´ng Cá»¥ Gá»£i Ã

- **Draw.io (diagrams.net)**: Váº½ sÆ¡ Ä‘á»“ miá»…n phÃ­
- **PlantUML**: Táº¡o sÆ¡ Ä‘á»“ tá»« text
- **Lucidchart**: CÃ´ng cá»¥ váº½ sÆ¡ Ä‘á»“ chuyÃªn nghiá»‡p
- **Visual Paradigm**: Há»— trá»£ Ä‘áº§y Ä‘á»§ UML
- **StarUML**: Pháº§n má»m UML desktop

### 9.3 TÃ i Liá»‡u Tham Kháº£o

- MÃ£ nguá»“n Backend: `/backend/src/main/java/org/f3/postalmanagement/`
- MÃ£ nguá»“n Frontend: `/frontend/src/`
- TÃ i liá»‡u nghiá»‡p vá»¥: `/docs/postal-management-v4.md`
- Database Schema: `/database/db.sql`

---

_TÃ i liá»‡u Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng tá»« phÃ¢n tÃ­ch mÃ£ nguá»“n há»‡ thá»‘ng Postal Management System_
